{% extends 'wubrgapp/base.html' %}

{% block title %}{{title}}{% endblock %}

{% block blurb %}
<!--This blurb is intentionally blank -->
{% endblock %}

{% block content %}
<br>

<nav>
  <ul class="pagination justify-content-center">
      {% if query %}
        {% if cards.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1{{query}}">&laquo; first</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}{{query}}">previous page</a></li>
        {% endif %}

        <li class="page-item">
            <a class="page-link" href="?page={{ page }}{{query}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
        </li>

        {% if cards.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}{{query}}">next page</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}{{ query }}">last &raquo;</a></li>
        {% endif %}

        {% elif name %}

          {% if cards.has_previous %}
              <li class="page-item"><a class="page-link" href="?page=1&name={{name}}">&laquo; first</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}&name={{name}}">previous page</a></li>
          {% endif %}

          <li class="page-item">
              <a class="page-link" href="?page={{ page }}&name={{name}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
          </li>

          {% if cards.has_next %}
              <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}&name={{name}}">next page</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}&name={{name}}">last &raquo;</a></li>
          {% endif %}

          {% else %}

            {% if cards.has_previous %}
                <li class="page-item"><a class="page-link" href="?page=1">&laquo; first</a></li>
                <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}">previous page</a></li>
            {% endif %}

            <li class="page-item">
                <a class="page-link" href="?page={{ page }}{{query}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
            </li>

            {% if cards.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}">next page</a></li>
                <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}">last &raquo;</a></li>
            {% endif %}

          {% endif %}
    </ul>
  </nav>

  {% for card in cards %}
      {% if forloop.first %}
        <div class="row" style="padding-top:15px;">
        {% endif %}
        <div class="col-md-4" style="padding:50px;" >
            <a href="/browse/card_details/{{card.id}}?page={{page}}{{query}}">
              {% if card.data.layout == "transform" or card.data.layout == "double_faced_token"  %}
                <img style="height:200px;" src="{{card.data.card_faces.0.image_uris.small}}" />
              {% elif card.data.layout == "planar" or card.data.layout == "split"  %}
                {% if card.data.layout == "split"  and "Aftermath" in card.data.card_faces.1.oracle_text  %}
                  <img style="height:200px;" src="{{card.data.image_uris.small}}" />
                {% else %}
                  <img class="rotate" style="height:200px;" src="{{card.data.image_uris.small}}" />
                {% endif %}
              {% else %}
                <img style="height:200px;" src="{{card.data.image_uris.small}}" />
              {% endif %}
            <li style="list-style:none" class="collection-item">{{card.data.name}}</li>
          </a>
        </div>
      {% if forloop.counter|divisibleby:3 %}
        </div>
        <div class="row" style="padding-top:15px;">
      {% endif %}
    {% if forloop.last %}</div>{% endif %}
{% endfor %}



<nav>
  <ul class="pagination justify-content-center">
      {% if query %}
        {% if cards.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1{{query}}">&laquo; first</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}{{query}}">previous page</a></li>
        {% endif %}

        <li class="page-item">
            <a class="page-link" href="?page={{ page }}{{query}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
        </li>

        {% if cards.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}{{query}}">next page</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}{{ query }}">last &raquo;</a></li>
        {% endif %}

        {% elif name %}

          {% if cards.has_previous %}
              <li class="page-item"><a class="page-link" href="?page=1&name={{name}}">&laquo; first</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}&name={{name}}">previous page</a></li>
          {% endif %}

          <li class="page-item">
              <a class="page-link" href="?page={{ page }}&name={{name}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
          </li>

          {% if cards.has_next %}
              <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}&name={{name}}">next page</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}&name={{name}}">last &raquo;</a></li>
          {% endif %}

          {% else %}

            {% if cards.has_previous %}
                <li class="page-item"><a class="page-link" href="?page=1">&laquo; first</a></li>
                <li class="page-item"><a class="page-link" href="?page={{ cards.previous_page_number }}">previous page</a></li>
            {% endif %}

            <li class="page-item">
                <a class="page-link" href="?page={{ page }}{{query}}">Page {{ cards.number }} of {{ cards.paginator.num_pages }}</a>
            </li>

            {% if cards.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ cards.next_page_number }}">next page</a></li>
                <li class="page-item"><a class="page-link" href="?page={{ cards.paginator.num_pages }}">last &raquo;</a></li>
            {% endif %}

          {% endif %}
    </ul>
  </nav>

{% endblock %}
